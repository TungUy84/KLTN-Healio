### REST Client Test Script
# Yêu cầu: Cài extension "REST Client" trong VS Code để chạy file này trực tiếp.
@baseUrl = http://localhost:3000/api
@email = test_user_02@example.com
@password = password123

### ------------------- AUTHENTICATION FLOW -------------------

### 1. Đăng ký tài khoản (Bước 1: Gửi OTP)
# Gửi thông tin đăng ký. Server sẽ gửi mã OTP về email (hoặc xem console log nếu chưa cấu hình mail).
POST {{baseUrl}}/auth/register
Content-Type: application/json

{
    "email": "{{email}}",
    "password": "{{password}}",
    "full_name": "Test User 02"
}

### 2. Xác thực Đăng ký (Bước 2: Nhập OTP)
# Lấy mã OTP từ email/console nhập vào biến @otp bên dưới
@registerOtp = 123456
POST {{baseUrl}}/auth/register/verify
Content-Type: application/json

{
    "email": "{{email}}",
    "otp": "{{registerOtp}}"
}

### 3. Đăng nhập
# Chỉ thành công nếu tài khoản đã Active (sau bước 2)
POST {{baseUrl}}/auth/login
Content-Type: application/json

{
    "email": "{{email}}",
    "password": "{{password}}"
}

### ------------------- FORGOT PASSWORD FLOW -------------------

### 4. Quên mật khẩu (Bước 1: Yêu cầu OTP)
POST {{baseUrl}}/auth/forgot-password
Content-Type: application/json

{
    "email": "{{email}}"
}

### 5. Xác thực OTP Reset (Bước 2: Kiểm tra OTP)
# Lấy mã OTP mới từ email nhập vào bên dưới
@resetOtp = 654321
POST {{baseUrl}}/auth/reset-password/verify
Content-Type: application/json

{
    "email": "{{email}}",
    "otp": "{{resetOtp}}"
}

### 6. Đặt lại mật khẩu (Bước 3)
POST {{baseUrl}}/auth/reset-password
Content-Type: application/json

{
    "email": "{{email}}",
    "otp": "{{resetOtp}}",
    "newPassword": "newpassword456"
}

### 7. Đăng nhập lại với mật khẩu mới
POST {{baseUrl}}/auth/login
Content-Type: application/json

{
    "email": "{{email}}",
    "password": "newpassword456"
}
